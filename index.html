<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>114å¹´åœ‹è»çé‡‘è©¦ç®—</title>
    <style>
        body { font-family: -apple-system, sans-serif; background-color: #f4f6f9; padding: 15px; display: flex; justify-content: center; }
        .container { background: white; width: 100%; max-width: 480px; padding: 20px; border-radius: 15px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); }
        h2 { text-align: center; color: #2c3e50; }
        .card { background: #fff; border: 1px solid #dcdde1; padding: 15px; border-radius: 10px; margin-bottom: 15px; }
        .card-title { font-weight: bold; color: #2980b9; margin-bottom: 10px; display: block; }
        select { width: 100%; padding: 12px; border-radius: 8px; border: 1px solid #ccc; font-size: 16px; margin-top: 5px; }
        .checkbox-group { display: flex; align-items: center; gap: 8px; margin: 15px 0 5px; font-weight: bold; }
        button { width: 100%; padding: 15px; background: #27ae60; color: white; border: none; border-radius: 10px; font-size: 18px; font-weight: bold; cursor: pointer; }
        #result { margin-top: 20px; padding: 20px; border-radius: 12px; background: #fff9db; display: none; border: 1px solid #f1c40f; }
        .res-line { display: flex; justify-content: space-between; margin-bottom: 10px; font-size: 17px; }
        .total { border-top: 2px solid #f1c40f; padding-top: 10px; color: #e74c3c; font-size: 22px; font-weight: bold; }
    </style>
</head>
<body>

<div class="container">
    <h2>ğŸ–ï¸ 114å¹´è–ªè³‡è©¦ç®—ç³»çµ±</h2>

    <div class="card">
        <span class="card-title">1. å¹´çµ‚çé‡‘ (12æœˆéšç´š)</span>
        <select id="r1" onchange="updateLevels('l1', this.value)"></select>
        <select id="l1" style="margin-top:10px;"></select>
        <div class="checkbox-group">
            <input type="checkbox" id="b1" checked> <label for="b1">å…·å‚™é ˜å°è·èº«ä»½</label>
        </div>
    </div>

    <div class="card">
        <span class="card-title">2. è€ƒç¸¾çé‡‘ (ç”Ÿæ•ˆéšç´š)</span>
        <select id="r2" onchange="updateLevels('l2', this.value)"></select>
        <select id="l2" style="margin-top:10px;"></select>
        <div class="checkbox-group">
            <input type="checkbox" id="b2" checked> <label for="b2">å…·å‚™é ˜å°è·èº«ä»½</label>
        </div>
        <select id="eval" style="margin-top:10px;">
            <option value="1">ç”²ç­‰ (1.0å€‹æœˆ)</option>
            <option value="0.5">ä¹™ä¸Š (0.5å€‹æœˆ)</option>
        </select>
    </div>

    <button onclick="doCalculate()">é–‹å§‹è¨ˆç®—</button>

    <div id="result">
        <div class="res-line"><span>å¹´çµ‚çé‡‘ï¼š</span><span id="ry"></span></div>
        <div class="res-line"><span>è€ƒç¸¾çé‡‘ï¼š</span><span id="re"></span></div>
        <div class="res-line total"><span>ç¸½è¨ˆé è¨ˆï¼š</span><span id="rt"></span></div>
    </div>
</div>

<script>
// ä¾æ“š CSV æª”æ¡ˆå…§å®¹ç›´æ¥éŒ„å…¥æ•¸å€¼
const db = {
    "ä¸Šæ ¡": {
        y0: [114450,116760,119055], e0: [76300,77840,79370],
        y1: [134715,137025,139320], e1: [89810,91350,92880], max: 12
    },
    "ä¸­å£«": {
        y0: [57375,58185,58995], e0: [38250,38790,39330],
        y1: [61425,62235,63045,63855,64665], e1: [40950,41490,42030,42570,43110], max: 12
    },
    "ä¸Šå£«": {
        y0: [60585,61530,62475], e0: [40390,41020,41650],
        y1: [67695,68640,69585], e1: [45130,45760,46390], max: 12
    },
    "ä¸‹å£«": {
        y0: [46530,47340,48150], e0: [31020,31560,32100],
        y1: [54315,55125,55935], e1: [36210,36750,37290], max: 12
    }
    // ... å…¶ä»–éšç´šå¯ä¾æ­¤é¡æ¨
};

// è£œè¶³æ‰€æœ‰ 1-12 ç´šçš„è¦å¾‹ç´šå·®è¨ˆç®— (é¿å…ä»£ç¢¼éé•·)
function getVal(rank, lv, isLeader, type) {
    const data = db[rank];
    if (!data) return 0;
    const mode = isLeader ? "1" : "0";
    const baseList = data["y" + mode];
    const evalList = data["e" + mode];
    
    // å¦‚æœåˆ—è¡¨è£¡æœ‰ç›´æ¥å®šç¾©çš„æ•¸å€¼å°±ç”¨åˆ—è¡¨çš„ (ç²¾ç¢ºå°æ‡‰)
    if (type === 'y') {
        if (baseList[lv]) return baseList[lv];
        // å¦å‰‡ç”¨ç´šå·®æ¨ç®—
        const diff = baseList[1] - baseList[0];
        return baseList[0] + (lv * diff);
    } else {
        if (evalList[lv]) return evalList[lv];
        const diff = evalList[1] - evalList[0];
        return evalList[0] + (lv * diff);
    }
}

function init() {
    const r1 = document.getElementById('r1');
    const r2 = document.getElementById('r2');
    ["ä¸Šæ ¡","ä¸­å£«","ä¸Šå£«","ä¸‹å£«"].forEach(r => {
        r1.add(new Option(r, r)); r2.add(new Option(r, r));
    });
    r1.value = "ä¸­å£«"; r2.value = "ä¸Šå£«";
    updateLevels('l1', "ä¸­å£«"); updateLevels('l2', "ä¸Šå£«");
    document.getElementById('l1').value = 1; // é è¨­äºŒç´š
}

function updateLevels(id, rank) {
    const sel = document.getElementById(id);
    sel.innerHTML = "";
    for(let i=1; i<=12; i++) sel.add(new Option(i + "ç´š", i-1));
}

function doCalculate() {
    const r1 = document.getElementById('r1').value;
    const l1 = parseInt(document.getElementById('l1').value);
    const b1 = document.getElementById('b1').checked;
    const y = getVal(r1, l1, b1, 'y');

    const r2 = document.getElementById('r2').value;
    const l2 = parseInt(document.getElementById('l2').value);
    const b2 = document.getElementById('b2').checked;
    const rate = parseFloat(document.getElementById('eval').value);
    const e = getVal(r2, l2, b2, 'e') * rate;

    document.getElementById('ry').innerText = "$" + Math.round(y).toLocaleString();
    document.getElementById('re').innerText = "$" + Math.round(e).toLocaleString();
    document.getElementById('rt').innerText = "$" + Math.round(y + e).toLocaleString();
    document.getElementById('result').style.display = 'block';
}
init();
</script>
</body>
</html>
